{% extends "base.html" %}

{% block content %}
<div class="container">
    {# Header and Search Section #}
    <h1>LeetCode Tracker</h1>
    <div class="top-nav">
        {# Search Form #}
        <div class="search-container">
            <form method="GET">
                <input type="text" name="search" value="{{ search }}"
                       placeholder="Search problems..."
                       class="search-input">
                <button type="submit" class="search-button">Search</button>
            </form>
        </div>

        {# List Navigation - supports filtering and renaming via right-click/long-press #}
        <div class="lists-nav">
            <button class="list-tab {% if not list_filter %}active{% endif %}"
                    onclick="window.location='/'">
                All Problems
            </button>
            {% for list in lists %}
                <button class="list-tab {% if list_filter == list.slot|string %}active{% endif %}"
                        onclick="window.location='/?list={{ list.slot }}'"
                        oncontextmenu="event.preventDefault(); renameList({{ list.slot }}, '{{ list.name }}')"
                        ontouchstart="handleTouchStart(event, {{ list.slot }}, '{{ list.name }}')"
                        ontouchend="handleTouchEnd(event)">
                    {{ list.name }}
                </button>
            {% endfor %}
        </div>
    </div>

    {# Due Problems Section #}
    {% if due_problems %}
    <section class="due-section">
        <h2>Due for Review</h2>
        <div class="problems-grid">
            {% for problem in due_problems %}
                {# Using shared problem card template for consistency #}
                {% include "partials/problem_card.html" %}
            {% endfor %}
        </div>
    </section>
    {% endif %}

    {# All Problems Section #}
    <section class="all-problems">
        <h2>All Problems</h2>
        <div class="problems-grid">
            {% for problem in all_problems %}
                {# Using shared problem card template for consistency #}
                {% include "partials/problem_card.html" %}
            {% endfor %}
        </div>
    </section>
</div>
{% endblock %}